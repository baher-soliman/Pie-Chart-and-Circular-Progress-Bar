$.fn.pie = function (e) { if (e == null || e == undefined) e = {}; if (e.radius == undefined || e.radius == null) e.radius = 50; if (e.borderWidth == undefined || e.borderWidth == null) e.borderWidth = 10; if (e.fillColor == undefined || e.fillColor == null) e.fillColor = "#fff"; if (e.borderColor == undefined || e.borderColor == null) e.borderColor = "#000"; if (e.valuePercentage == undefined || e.valuePercentage == null) e.valuePercentage = 0; if (e.emptyFillColor == undefined || e.emptyFillColor == null) e.emptyFillColor = "Transparent"; if (e.emptyBorderColor == undefined || e.emptyBorderColor == null) e.emptyBorderColor = "#eee"; if (e.hideValue == undefined || e.hideValue == null) e.hideValue = false; e.valuePercentage = parseInt(e.valuePercentage); if (e.valuePercentage != NaN && e.valuePercentage >= 0 && e.valuePercentage <= 100) { var t = 360 * e.valuePercentage / 100; var n = 2; var r = e.emptyFillColor; var i = e.emptyBorderColor; if (e.valuePercentage > 50) { n = 4; r = e.fillColor; i = e.borderColor } this.css("position", "relative").css("height", (e.radius + e.borderWidth) * 2 + "px").css("width", (e.radius + e.borderWidth) * 2 + "px").css("direction","ltr"); this.append("<div class='leftHalf' style='width:" + e.radius + "px;height:" + e.radius * 2 + "px;background-color:" + e.emptyFillColor + ";border-top-left-radius:" + (e.radius + e.borderWidth).toString() + "px;border-bottom-left-radius:" + (e.radius + e.borderWidth).toString() + "px;border-color:" + e.emptyBorderColor + ";border-width:" + e.borderWidth + "px;'></div>"); this.append("<div class='rightHalf' style='width:" + e.radius + "px;height:" + e.radius * 2 + "px;left:" + (e.radius + e.borderWidth).toString() + "px;border-top-right-radius:" + (e.radius + e.borderWidth).toString() + "px;border-bottom-right-radius:" + (e.radius + e.borderWidth).toString() + "px;z-index:1;background-color:" + r + ";border-color:" + i + ";border-width:" + e.borderWidth + "px;'></div>"); this.append("<div class='movingHalf' style='-webkit-transform:rotate(" + t + "deg);-moz-transform:rotate(" + t + "deg);-ms-transform:rotate(" + t + "deg);transform:rotate(" + t + "deg);width:" + e.radius + "px;height:" + e.radius * 2 + "px;border-top-left-radius:" + (e.radius + e.borderWidth).toString() + "px;border-bottom-left-radius:" + (e.radius + e.borderWidth).toString() + "px;z-index:" + n + ";background-color:" + e.fillColor + ";border-color:" + e.borderColor + ";border-width:" + e.borderWidth + "px;'></div>"); this.append("<div class='pieOverlay' style='width:" + (e.radius + e.borderWidth) * 2 + "px" + ";height:" + (e.radius + e.borderWidth) * 2 + "px;'></div>"); if (!e.hideValue) { this.find(".pieOverlay").append("<span>" + e.valuePercentage + "%</span>") } } }